---
import BaseLayout from "@layout/BaseLayout.astro";
import ContactForm from "@ui/forms/ContactForm.astro";
import type { WithContext, Thing } from "schema-dts";

const contactInfo = {
  reassurance:
    "No spam, no generic decks. We respond with a point of view and clear next steps if there is a real path to production.",
};

// SEO metadata for the page
const title = "Talk to us about your next AI project";
const subTitle =
  "Share a bit about your use case and current state. We will respond with an honest view on feasibility and options.";

const seo = {
  title: "Contact Accelyze",
  description:
    "Get in touch to discuss your AI initiative. We will give you a candid assessment of feasibility, risks, and production paths.",
};

// Schema.org metadata for SEO
const schema: WithContext<Thing> = {
  "@context": "https://schema.org",
  "@type": "ContactPage",
  inLanguage: "en-US",
  "@id": Astro.url.href,
  url: Astro.url.href,
  name: "Contact Accelyze",
  description:
    "Reach out to Accelyze for any questions, support, or business inquiries. Our team is ready to assist you.",
  isPartOf: {
    "@type": "WebSite",
    url: `${Astro.site}`,
    name: "Accelyze",
    description:
      "Built by people who have shipped AI at scale.",
  },
};
---

<BaseLayout seo={seo} schema={schema}>
  <div class="mx-auto max-w-[85rem] px-4 pb-28 pt-48 sm:px-6 lg:px-8">
    <div class="mb-10 text-center lg:mb-14">
      <h2
        class="text-balance text-4xl text-slate-800 sm:text-5xl md:text-6xl lg:text-7xl dark:text-white"
      >
        {title}
      </h2>
      <p class="mx-auto mt-3 max-w-2xl text-lg text-slate-600 dark:text-slate-300">
        {subTitle}
      </p>
    </div>

    <div class="mx-auto max-w-4xl">
      <div class="rounded-3xl border border-slate-200 bg-white/90 p-8 shadow-xl shadow-indigo-200/40 dark:border-slate-800 dark:bg-slate-900/80">
        <ContactForm />
      </div>
      <p class="mt-6 text-center text-sm text-slate-500 dark:text-slate-400">
        {contactInfo.reassurance}
      </p>
    </div>
  </div>

  <script>
    // Automatically adjusting the height of the textarea
    // based on its content. Triggers when the textarea content changes.
    document.addEventListener("astro:page-load", () => {
      function textareaAutoHeight(
        el: HTMLTextAreaElement,
        offsetTop: number = 0,
      ): void {
        el.style.height = "auto";
        el.style.height = `${el.scrollHeight + offsetTop}px`;
      }

      (() => {
        const textareas: string[] = ["#input-goal"];

        textareas.forEach((selector) => {
          const textarea = document.querySelector(
            selector,
          ) as HTMLTextAreaElement;

          if (!textarea) return;

          const overlay = textarea.closest(".hs-overlay");

          if (overlay) {
            const instance = (window as any).HSOverlay.getInstance(
              overlay,
              true,
            );

            if (instance) {
              instance.element.on("open", () =>
                textareaAutoHeight(textarea, 3),
              );
            }
          } else {
            textareaAutoHeight(textarea, 3);
          }

          textarea.addEventListener("input", () => {
            textareaAutoHeight(textarea, 3);
          });
        });
      })();
    });
  </script>
</BaseLayout>
