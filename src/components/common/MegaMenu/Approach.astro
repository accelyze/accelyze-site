---
import Icon from "@ui/icons/Icon.astro";
import { approachMenu } from "@utils/megaMenu/approach";
import { withBase, stripBase } from "@utils/paths";

const sectionDescription =
  "Discover how our team delivers outcomes with a proven methodology";
const currentPath = stripBase(Astro.url.pathname);
---

<div
  class="hs-dropdown [--adaptive:none] [--is-collapse:true] [--strategy:static] xl:[--is-collapse:false] xl:[--strategy:absolute] xl:[--trigger:hover]"
>
  <button
    id="mega-menu-approach"
    type="button"
    class={`hs-dropdown-toggle flex w-full items-center rounded-lg p-2 font-medium text-slate-800 hover:bg-slate-100 focus:bg-slate-100 focus:outline-hidden text-nowrap dark:text-slate-200 dark:hover:bg-slate-800 ${
      currentPath.startsWith("/approach") ? "underline underline-offset-4 text-amber-600 dark:text-amber-400" : ""
    }`}
    aria-haspopup="menu"
    aria-expanded="false"
    aria-label="Mega Menu Approach"
  >
    Approach <Icon name="arrowDownRight" />
  </button>

  <div
    class="hs-dropdown-menu relative start-0 top-full z-10 mt-2 hidden w-full min-w-60 max-w-(--breakpoint-md) opacity-0 transition-[opacity,margin] duration-150 before:absolute before:-top-5 before:start-0 before:h-5 before:w-full hs-dropdown-open:opacity-100 xl:left-1/2 xl:-translate-x-1/2 xl:duration-300"
    role="menu"
    aria-orientation="vertical"
    aria-labelledby="mega-menu-approach"
  >
    <div
      class="bg-white px-4 py-2 lg:mx-8 xl:mx-6 xl:rounded-lg xl:px-16 xl:py-10 xl:shadow-lg xl:ring-1 xl:ring-slate-200 dark:bg-slate-900 dark:ring-slate-700"
    >
      <p class="text-sm text-slate-600 dark:text-slate-300">
        {sectionDescription}
      </p>
      <hr class="mb-5 border border-slate-200 dark:border-slate-700" />

      <div class="gap-4 py-1 md:grid md:grid-cols-2 md:p-2">
        {
          approachMenu.map((section) => (
            <div class="flex flex-col">
              <p class="text-sm text-slate-600">{section.sectionTitle}</p>

              {section.items.map((item) => (
                <a
                  class="flex gap-x-4 rounded-lg p-3 hover:bg-slate-100 focus:bg-slate-100 focus:outline-hidden dark:hover:bg-slate-800"
                  href={withBase(item.href)}
                >
                  <Icon name={item.icon} class="mt-1 size-5 shrink-0 text-slate-800 dark:text-slate-200" />

                  <div class="grow">
                    <p class="text-sm font-medium text-slate-800 dark:text-slate-200">
                      {item.title}
                    </p>
                    <p class="text-sm text-slate-500 dark:text-slate-400">{item.description}</p>
                  </div>
                </a>
              ))}
            </div>
          ))
        }
      </div>
    </div>
  </div>
</div>
