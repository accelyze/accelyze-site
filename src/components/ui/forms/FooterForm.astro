---
import { withBase } from "@utils/paths";

const formAction = "https://formsubmit.co/dd461712f74d90d2bafd8eedacdc7e80";
const thankYouUrl = new URL(withBase("/thanks"), Astro.site).href;

const formStrings = {
  legend: "More Information?",
  placeholder: "Enter your email",
  submit: "Submit",
  description:
    "Enter your email, and we'll be in touch.",
};
---

<form action={formAction} method="POST">
  <input type="hidden" name="_captcha" value="false" />
  <input type="hidden" name="_next" value={thankYouUrl} />
  {/* Fieldset for grouping form elements */}
  <fieldset
    class="mt-4 flex flex-col items-center gap-2 rounded-lg bg-white/90 p-2 shadow-sm sm:flex-row sm:gap-3 dark:bg-slate-900/70"
    aria-labelledby="form-legend"
  >
    {/* Visible legend for screen readers */}
    <legend id="form-legend" class="sr-only text-lg font-medium text-slate-700"
      >{formStrings.legend}</legend
    >

    {/* Email input */}
    <div class="w-full">
      <label for="email-input" class="sr-only">{formStrings.placeholder}</label>
      <input
        type="email"
        id="email-input"
        name="email"
        class="block w-full rounded-lg border border-transparent bg-white px-4 py-3 text-sm text-slate-900 focus:border-indigo-600 focus:ring-indigo-600 dark:bg-slate-900 dark:text-slate-100 dark:border-slate-700"
        placeholder={formStrings.placeholder}
        required
        aria-label={formStrings.placeholder}
        aria-describedby="form-description"
        autocomplete="email"
        spellcheck="false"
      />
    </div>

    {/* Submit button */}
    <button
      type="submit"
      class="inline-flex w-full items-center justify-center gap-x-2 whitespace-nowrap rounded-lg border border-transparent bg-indigo-600 p-3 text-sm font-semibold text-white transition duration-300 hover:bg-indigo-500 focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-indigo-600 sm:w-auto dark:bg-indigo-500 dark:hover:bg-indigo-400"
      aria-label="Submit email"
    >
      {formStrings.submit}
    </button>
  </fieldset>

  {/* Description paragraph with ARIA association */}
  <p id="form-description" class="mt-3 text-sm text-slate-400">
    {formStrings.description}
  </p>
</form>
